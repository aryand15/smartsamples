<div id="download-sample-{{ sample_id }}">
    <a
        href="{{ file_url }}"
        download
        class="btn-icon btn-download"
        data-sample-id="{{ sample_id }}"
        onclick="trackDownload(this)"
    >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        <span id="download-count-{{ sample_id }}">{{ download_count }}</span>
    </a>
</div>
<script>
function trackDownload(element) {
    const sampleId = element.dataset.sampleId;
    // Track the download via HTMX
    htmx.ajax('POST', '/sample/' + sampleId + '/download', {
        target: '#download-sample-' + sampleId,
        swap: 'outerHTML'
    });
}
</script>
</script>
